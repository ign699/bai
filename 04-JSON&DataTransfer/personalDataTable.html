<!DOCTYPE html>
<html>
	<head>
		<title>Personal</title>
        <meta charset="UTF-8">
        <script
            src="https://code.jquery.com/jquery-3.5.0.js"
            integrity="sha256-r/AaFHrszJtwpe+tHyNi/XCfMxYpbsRg2Uqn0x3s2zc="
            crossorigin="anonymous"></script>
        <script src="http://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"></script>
        <link rel="stylesheet" href="http://cdn.datatables.net/1.10.20/css/jquery.dataTables.min.css">
	</head>
	<body>
		<h1>Personal</h1>
		<p>Open a console and then click the button</p>
		<input type="button" value="Make a connection" onclick="connect()">
		<table id="myTable">

        </div>
		<script>
			function connect(){
				var method = 'GET';
				var URL = 'people.json';
				var xhr = new XMLHttpRequest();
				xhr.onreadystatechange = function(){display(this);};
				xhr.open(method, URL);
				xhr.send();
			}
			function display(r){
				if (r.readyState === 4 && r.status === 200) {
					const data = JSON.parse(r.response)
                    console.log(data)
                    $(document).ready( function () {
                        $('#myTable').DataTable({
                            data: data.map(ele => Object.values(ele)),
                            columns: [
                                { title: "name" },
                                { title: "surname" },
                                { title: "age" },
                                { title: "country" },
                                { title: "email" },
                            ]
                        } );
                    });
				}
			};
		</script>

	</body>
</html>
